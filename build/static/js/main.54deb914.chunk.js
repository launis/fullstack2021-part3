(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{42:function(e,t,n){"use strict";n.r(t);var c=n(1),r=n.n(c),u=n(18),a=n.n(u),o=(n(9),n(8)),i=n(3),s=n(0),l=function(e){var t=e.header;return Object(s.jsx)("h2",{children:t})},d=function(e){var t=e.addPerson,n=e.newName,c=e.handleNameChange,r=e.newNumber,u=e.handleNumberChange;return Object(s.jsxs)("form",{onSubmit:t,children:["name:\xa0",Object(s.jsx)("input",{value:n,onChange:c}),"\xa0 number:\xa0",Object(s.jsx)("input",{value:r,onChange:u}),Object(s.jsx)("button",{type:"submit",children:" add"})]})},j=function(e){var t=e.onChange,n=e.newSearch;return Object(s.jsxs)("div",{children:["Starts with ",Object(s.jsx)("input",{onChange:t,value:n})]})},f=function(e){var t=e.person,n=e.delPerson;return Object(s.jsxs)("li",{children:[t.name,t.number,Object(s.jsx)("button",{onClick:n,children:"Delete"})]})},h=function(e){var t=e.persons,n=e.newSearch,c=e.delPerson;return Object(s.jsx)("ul",{children:t.filter((function(e){return e.name.startsWith(n)})).map((function(e){return Object(s.jsx)(f,{person:e,delPerson:function(){return c(e={person:e})}},e.id)}))})},b=function(e){var t=e.message;return null===t?null:Object(s.jsxs)("div",{className:"error",children:[Object(s.jsx)("p",{children:t.text}),Object(s.jsx)("p",{children:t.type})]})},m=n(4),p=n.n(m),O="https://serene-headland-61972.herokuapp.com/api/persons",x={getAll:function(){return p.a.get(O).then((function(e){return e.data}))},create:function(e){return p.a.post(O,e).then((function(e){return e.data}))},del:function(e){return p.a.delete("".concat(O,"/").concat(e)).then((function(e){return e.data}))},update:function(e,t){return p.a.put("".concat(O,"/").concat(e),t).then((function(e){return e.data}))}},g=function(){var e=Object(c.useState)([]),t=Object(i.a)(e,2),n=t[0],r=t[1],u=Object(c.useState)(""),a=Object(i.a)(u,2),f=a[0],m=a[1];Object(c.useEffect)((function(){x.getAll().then((function(e){r(e)}))}),[]);var p=Object(c.useState)(""),O=Object(i.a)(p,2),g=O[0],v=O[1],w=Object(c.useState)(""),C=Object(i.a)(w,2),S=C[0],y=C[1],N=Object(c.useState)(""),P=Object(i.a)(N,2),T=P[0],k=P[1];return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(b,{message:f}),Object(s.jsx)(l,{header:"Phonebook"}),Object(s.jsx)(j,{onChange:function(e){v(e.target.value)},newSearch:g}),Object(s.jsx)(l,{header:"Add new"}),Object(s.jsx)(d,{newName:S,newNumber:T,handleNameChange:function(e){y(e.target.value)},handleNumberChange:function(e){k(e.target.value)},addPerson:function(e){e.preventDefault();var t=n.find((function(e){return e.name===S}));console.log("person",t,S);var c={name:S,number:T};if(t){if(window.confirm("".concat(S," is already added to phonebook, replase with new number?"))){var u=Object(o.a)(Object(o.a)({},t),{},{number:T});x.update(t.id,u).then((function(e){r(n.filter((function(e){return e.id!==t.id})).concat(e)),m({text:"Edited ".concat(e.name),type:"success"}),setTimeout((function(){m(null)}),3e3)})).catch((function(e){r(n.filter((function(e){return e.id!==t.id}))),m({text:e,type:"error"}),setTimeout((function(){m(null)}),3e3)}))}}else x.create(c).then((function(e){r(n.concat(e)),m({text:"New ".concat(e.name),type:"success"}),setTimeout((function(){m(null)}),3e3)})).catch((function(e){m({text:e,type:"error"}),setTimeout((function(){m(null)}),3e3)}));y(""),k("")}}),Object(s.jsx)(l,{header:"Numbers"}),Object(s.jsx)(h,{persons:n,newSearch:g,delPerson:function(e){var t=e.person;if(window.confirm("Are you sure you want to delete ".concat(t.name,"?"))){var c=t.name;x.del(t.id).then((function(e){r(n.filter((function(e){return e.id!==t.id}))),m({text:"Delete ".concat(c),type:"success"}),setTimeout((function(){m(null)}),3e3)})).catch((function(e){m({text:e,type:"error"}),setTimeout((function(){m(null)}),3e3)}))}}})]})},v=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,43)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,u=t.getLCP,a=t.getTTFB;n(e),c(e),r(e),u(e),a(e)}))};a.a.render(Object(s.jsx)(r.a.StrictMode,{children:Object(s.jsx)(g,{})}),document.getElementById("root")),v()},9:function(e,t,n){}},[[42,1,2]]]);
//# sourceMappingURL=main.54deb914.chunk.js.map